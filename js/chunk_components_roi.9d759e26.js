(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk_components_roi"],{"1bb1":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("be82"))},2022:function(e,t,n){},be82:function(e,t,n){"use strict";var r,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class o{isBase64Image(e){let t=/data:image\/([a-zA-Z]*);base64,([^\"]*)/;return!!t.test(e)}isUrl(e){let t=/^(ws|wss|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/i;return!!t.test(e)}getBase64(e){return a(this,void 0,void 0,(function*(){let t;return e?t=yield new Promise((t,n)=>{try{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r),r.onerror=()=>n("error occurred when read file")}catch(r){console.error("error occurred when read file"),t(null)}}):(console.error("file not exist",e),t=null),t}))}fileToBase64(e,t=null){return a(this,void 0,void 0,(function*(){let n;if(e)if(t&&t>0)if(e.size&&e.size<t)try{n=yield this.getBase64(e)}catch(r){console.error("error occurred when read file"),n=null}else console.error("file size is to large"),n=null;else try{n=yield this.getBase64(e)}catch(r){console.error("error occurred when read file"),n=null}else console.error("file not exist",e),n=null;return n}))}urlToBase64(e){return a(this,void 0,void 0,(function*(){let t;return this.isUrl(e)?t=yield new Promise((n,r)=>{try{let t=new XMLHttpRequest;t.onload=()=>{let e=new FileReader;e.onloadend=()=>n(e.result.toString()),e.readAsDataURL(t.response)},t.onerror=r,t.open("GET",e),t.responseType="blob",t.send()}catch(a){console.error("error occurred when url to base64"),t=null}}):(console.error("url error"),t=null),t}))}urlImageToBase64(e){return a(this,void 0,void 0,(function*(){let t;return this.isUrl(e)?t=yield new Promise((t,n)=>{try{let r,a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{let e=document.createElement("canvas");e.width=150,e.height=150;let n=e.getContext("2d");n.drawImage(a,0,0,e.width,e.height);let o=e.toDataURL("image/jpg");r=o.replace(/^data:image\/(png|jpg);base64,/,""),t(r)},a.onerror=()=>n("error occurred when url to file"),a.src=e}catch(r){console.error("error occurred when url to file"),t(null)}}):(console.error("url error"),t=null),t}))}base64ToBlob(e){let t=e.split(";base64,"),n=t[0].split(":")[1],r=window.atob(t[1]),a=r.length,o=new Uint8Array(a);for(let i=0;i<a;++i)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}getBase64ContentType(e){let t=e.split(";base64,"),n=t[0].split(":")[1];return n}getBase64String(e){let t=e.split(";base64,"),n=t[1];return n}getBase64FullString(e,t){return`data:${e};base64,${t}`}imageBase64Src(e,t=r.jpg){return`data:image/${t};base64,${e}`}}t.ServiceBase64Class=o,function(e){e["png"]="png",e["jpg"]="jpg",e["gif"]="gif"}(r=t.EImageFileType||(t.EImageFileType={})),t.ServiceBase64=new o,t.imageEmpty="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQDwAEhQGAhKmMIQAAAABJRU5ErkJggg==",t.personEmpty="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAABHNCSVQICAgIfAhkiAAAHSxJREFUeF7tnUmMXElax/8vMyszK2vft6zdZZfttqvb47Y9iEWDaHxgpB5xBSHggBhOnDnMDAfEkRuICwgQVzSN5oDdCCFEj8vd7m5XeXe5tqx936syK5eHIt1t3N4q8y0R8d77h1Ryq+tFfBG/L+qnly/jRRh4R/n0zmQd8vsfF0zjdwEMw0SnYaDmXXX4OxIgARIolYBpYg/AAgw8NmD8mxFJ/PtHlwd33lbfeNMv/nP0XlsBhb+AafwJDMRLDc7rSIAESMAWARNpGObfhxD669+6dmHl1bZeE9aN2/d+CNP8VwOotRWYlUmABEjAIgET2A0Bf/DRtYufvNzEC2GZpmncHB3/qWEYPwHwxjsvi7FZjQRIgASsEDBNEz/57WsX/sowDFM08EJMN0fv/T5g/ouVVlmHBEiABNwiYAB//NG1i//4Qlg3bo/9plHADRhGxK2gbJcESIAErBEwsyZCv3P92oVPi3dYN0bHf24AH1trjLVIgARIwF0CJvDJ9WsXf2Q8/0bQXOJzK3eBs3USIAFbBMxCJNJl3Lx9709hmn9nqylWJgESIAG3CRjGj42bt8b/GwZ+w+1YbJ8ESIAE7BEwbxg3R8e2AaPOXkOsTQIkQAJuEzB3jBu3xtOGgZjbodg+CZAACdghYJrIiMWixQVZLCRAAiSgOwEKS/cMsX8kQAIvCFBYnAwkQAKeIUBheSZV7CgJkACFxTlAAiTgGQIUlmdSxY6SAAlQWJwDJEACniFAYXkmVewoCZAAhcU5QAIk4BkCFJZnUsWOkgAJUFicAyRAAp4hQGF5JlXsKAmQAIXFOUACJOAZAhSWZ1LFjpIACVBYnAMkQAKeIUBheSZV7CgJkACFxTlAAiTgGQIUlmdSxY6SAAlQWJwDJEACniFAYXkmVewoCZAAhcU5QAIk4BkCFJZnUsWOkgAJUFicAyRAAp4hQGF5JlXsKAmQAIXFOUACJOAZAhSWZ1LFjpIACVBYnAMkQAKeIUBheSZV7CgJkACFxTlAAiTgGQIUlmdSxY6SAAlQWJwDJEACniFAYXkmVewoCZAAhcU5QAIk4BkCFJZnUqWuo9GKCGLRCsS/+bciHEIkHEK4+BNG2DBK6lzeNJHP55HPF5DLF5DNF5A5ziKdzRX/Pc7mSmqHFwWXAIUV3Ny/NnIhocpYFFWVMSTiUdRUxov/Lf6/jJLL53FwdIy9wzQO0sc4TGdwmD5GvlCQEZ4xPECAwvJAktzqYl11Ag3VlairSSARi6IiEnYrlK12xZ3XUeYY2/tH2No7xO7Bka32WNm7BCgs7+au7J6HQyE01lahsTaBprpqRMJ6CuqkgWVzeWzsHmBjZ7/4wxIcAhSWz3MtJNVcX43muuqipPxWxMfF5+I6wNr2nt+Gx/G8QoDC8umUEM+eki0NaGus9ekIXx+WkNfa1h7mVjdxlMkGZtxBGiiF5bNs11VVorejCfXVCZ+NrLzhrG/vYWZ5o/jQnsU/BCgsn+RSLD3o72hCW2OdT0ZkfximaWJxfRuzyxvFZRQs3idAYXk8h2LJQVdzPZKtjcV1USyvExAP6cXHxMW1bRRMk4g8TIDC8nDyWhtqMNjVgopIxMOjkNf1dOYYT+dWsb1/KC8oIzlKgMJyFKecxsRyhFPJFrQ2BOeBupNk51e3MLW45mSTbEsSAQpLEminwogV6O/1dyEeq3CqyUC2s3+Yxv3pRb4O5LHsU1geSlhzfQ3O9XV4qMd6d1U827o/tVB8FYjFGwQoLG/kqbjoU8jKKPFFY48MS3k3xfuL48/msX+UUd4XduBkAhTWyYyUXyFepznf30lZuZQJseRhbCJVfOGaRW8CFJbe+UFDTQIXBpOa99L73RMvWI89m+MKec1TSWFpnKDaqjguDiYRCnF9lYw0ZbI53J1IIXPMfblk8LYSg8KyQk1CnerKGEaGuiFeXmaRRyB9nMVXT1PI5fLygjJSyQQorJJRybswFDJwebgP8SiXLsij/v+RNncPit8esuhHgMLSLyc409MeqF0WNEwBJuZWsLSxo2PXAt0nCkuz9IvlC+IbQRa1BMRWNV8+noX4iMiiDwEKS59cIGQYuHKuH2LnBRb1BMTGgA+mF9V3hD14QYDC0mgy9LY3Qfyw6ENgfHIe23t8WVqXjFBYmmQiHDJw9fygtBNqNBm29t0QshLSYtGDAIWlRx6QbG3AQGeLJr1hN14m8OWTWRzw1R0tJgWFpUUagKvnBxDjsytNsvHdbqxs7uJJalnLvgWtUxSWBhkX2xqf6WnToCfswtsIjD6Y4lY0GkwPCkuDJIyc6kZddaUGPWEX3kZgemkdcyubBKSYAIWlOAFiNbtYysCiN4F0JovPH03r3ckA9I7CUpzk/o5mdLc1Ku4Fw5dCYOzZPHa4H3wpqFy7hsJyDW1pDX94tg+VsWhpF/MqpQRSK5uYWVpX2oegB6ewFM6AWLQCV/lxUGEGygu9e3CEuxNz5VXi1Y4SoLAcxVleY+KYruFe7tFeHjV1V4szDT8bmwBPNlSXAwpLHXucSrais7leYQ8YulwC4g5L3GmxqCFAYanhXoz6/lA3aqu4nEFhCsoOPbmwioW17bLrsYIzBCgsZzhaauVXR4aKOzSweIeA2CNL7JXFooYAhaWGO2LRCK6eG1AUnWGtEtjZPyoeVsGihgCFpYY76qsTuHiKp+Eowm85rNjQ7/OHXEBqGaDNihSWTYBWq7c31eF0N98ftMpPVb1CwcT/jk+oCh/4uBSWoimQbG3EQGezougMa4fAZ+MTyBe4uMEOQ6t1KSyr5GzW62tvQg93F7VJUU310fuTOOYxYErgU1hKsKO4FTK3Q1YE32ZYcTjFQTpjsxVWt0KAwrJCzYE6XOXuAERFTTyeXcLq1p6i6MEOS2Epyn9zfQ3O9fG1HEX4bYV9OLOE9W0KyxZEi5UpLIvg7FZrqKnChcEuu82wvgICPElHAfRvQlJYitjXJOL44HSPougMa4fA109T2DtM22mCdS0SoLAsgrNbraoyhu+d6bXbDOsrIPDV0xT2KSwF5AEKSwl2gMJSBN6BsBSWAxAtNkFhWQRntxqFZZeguvoUljr2FJYi9hSWIvAOhKWwHIBosQkKyyI4u9UoLLsE1dWnsNSxp7AUsaewFIF3ICyF5QBEi01QWBbB2a1GYdklqK4+haWOPYWliD2FpQi8A2EpLAcgWmyCwrIIzm41CssuQXX1KSx17CksRewpLEXgHQhLYTkA0WITFJZFcHarUVh2CaqrT2GpY09hKWJPYSkC70BYCssBiBaboLAsgrNbjcKyS1BdfQpLHXsKSxF7CksReAfCUlgOQLTYBIVlEZzdahSWXYLq6lNY6thTWIrYU1iKwDsQlsJyAKLFJigsi+DsVqOw7BJUV5/CUseewlLEnsJSBN6BsBSWAxAtNkFhWQRntxqFZZeguvoUljr2FJYi9hSWIvAOhKWwHIBosQkKyyI4u9UoLLsE1dWnsNSxp7AUsaewFIF3ICyF5QBEi01QWBbB2a1GYdklqK4+haWOPYWliD2FpQi8A2EpLAcgWmyCwrIIzm41CssuQXX1KSx17CksRewpLEXgHQhLYTkA0WITFJZFcHarUVh2CaqrT2GpY09hKWJPYSkC70BYCssBiBaboLAsgrNbram2CucHuuw2w/oKCDycXsT6zr6CyAxJYSmYA4l4FO8PdSMSDiuIzpB2CeTyBdydSOEwfWy3KdYvkwCFVSYwu5fHoxUYGepGrCJitynWV0jgOJvD3Yk5pI+zCnsRvNAUluScn+/vRFNdteSoDOcGgY2dfTyYXnSjabb5FgIUlsSpUVsVx/tDPRIjMpTbBMYm5rBzcOR2GLb/DQEKS+JUuDzci0Q8JjEiQ7lNYP8og6+ezLodhu1TWHLnQHVlDJfO9MoNymhSCHz5eAYHfAAvhTXvsKRgBvo6mtHT1igpGsPIJDC7vAHxw+I+AQrLfcbFCJeH+yCWM7D4j8D+URpfPUn5b2AajojCkpSUXxsZgmEYkqIxjEwC+UIBn40/kxkysLEoLAmpj1ZEcO38gIRIDKGKwOj9SRzn8qrCByYuhSUh1dWJOC6d5nIGCaiVhfj6aQp7h2ll8YMSmMKSkGl+QygBsuIQ4lWd3QMKy+00UFhuEwZAYUmArDgEhSUnARSWBM4UlgTIikNQWHISQGFJ4ExhSYCsOASFJScBFJYEzhSWBMiKQ1BYchJAYUngTGFJgKw4BIUlJwEUlgTOFJYEyIpDUFhyEkBhSeBMYUmArDgEhSUnARSWBM4UlgTIikNQWHISQGFJ4ExhSYCsOASFJScBFJYEzhSWBMiKQ1BYchJAYUngTGFJgKw4BIUlJwEUlgTOFJYEyIpDUFhyEkBhSeBMYUmArDgEhSUnARSWBM4UlgTIikNQWHISQGFJ4ExhSYCsOASFJScBFJYEzhSWBMiKQ1BYchJAYUngTGFJgKw4BIUlJwEUlgTOFJYEyIpDUFhyEkBhSeDMPd0lQFYc4uuJOezxyHrXs0BhuY4YqIxV4MOz/RIiMYQqAl88msZRJqsqfGDiUlgSUl0RieD77/GYLwmolYX45b1J5PI85svtBFBYbhP+pn1xLqE4n5DFfwSyuRxu3Z/y38A0HBGFJSkp5/s70VRXLSkaw8gksLq1i8ezyzJDBjYWhSUp9e1NdTjd3SYpGsPIJPAktYKVzR2ZIQMbi8KSlPpIOISr5wYQDockRWQYGQSyuTxuP5xCoWDKCBf4GBSWxCkw0NmMZGujxIgM5TaB2eUNiB8WOQQoLDmci1HEXdbl4T4+fJfI3M1QmeMsvng8w7srNyG/0jaFJRG2CCUevIsH8CzeJ3B/agGbuwfeH4iHRkBhKUhWf2czuvnRUAF550JOLa5jfnXTuQbZUkkEKKySMDl/kfjGUHxzyOI9AnxupS5nFJY69ki2NqCvvRmhkKGwFwxdDoEnqWWsbO6WU4XXOkiAwnIQppWm6qorMXKq20pV1pFIYHvvEM8WVnGYPpYYlaFeJUBhaTAnfuXCICLhsAY9YRdeJiDWVq3v7GFtaw8bfLiuxeSgsDRIw7n+TjTztR0NMvHdLvDjn3YpAYWlQU66Wuox2NWqQU/YhW8JFAoFfHZvEqbJFew6zQoKS4NsJOIxXB7u1aAn7MK3BMSDdXGHxaIXAQpLk3xcPT+AGLef0SQbwL3JBWztcVGoNgn5piMUliYZOZVsRWdzvSa9CXY3xAvNt+5PBhuCpqOnsDRJTENNAhcGk5r0JtjdWFjbxuTCarAhaDp6CkujxHB5gx7JuDsxh10eKKFHMl7pBYWlUVqGkq3o4MdCpRk5yhzji0czSvvA4G8nQGFpNDtqEnF8cLpHox4FrytTi2uYX90K3sA9MmIKS7NEif2yEvGoZr0KRndy+UJx99B8vhCMAXtwlBSWZknramnAYFeLZr0KRnfmVjYxvbQejMF6dJQUlmaJC4dCxTMMQyHu/S4zNWJF++j9KWR5tqBM7GXHorDKRuZ+hTM97WhrrHU/ECO8ILC8uYunXNmu/YygsDRMEbeckZ+UO49nuHWMfOxlR6SwykYmp8L3zvSiqjImJ1jAo4itYx5MLQScgjeGT2FpmicevCovMVwoKo+13UgUll2CLtUXD92vne/nxn4u8f22Wd5duQzY4eYpLIeBOtlcb3sTxA+LOwTEN4NfPpnlsyt38LrSKoXlClZnGhWHU1w7P8C7LGdwvtYK97xyCayLzVJYLsJ1omneZTlB8c1tfP5oGulM1r0AbNlxAhSW40idbVDcZV0528/j7Z3FioW1LUwurDncKptzmwCF5TZhB9rvaKrDUHebAy2xCUFAvCso3hkU7w6yeIsAheWRfPGlaOcSNbuyiVm+M+gcUIktUVgSYdsJ1VRXjfP9nXaaYF0A6eMs7jyaQYGn4XhyPlBYHkqb2CtL7JnFYp3A3YkUdg/S1htgTaUEKCyl+MsLzg3+yuP16tWL69t4Ns+92u1RVFubwlLLv+zoPF2nbGTFCpnjLL54PANx/DyLdwlQWB7LXTgcgngAzzMMy0vc+OQ8tvcOy6vEq7UjQGFpl5KTO9TaUIvh3vaTL+QVRQLc68o/E4HC8mguL55Kor464dHey+t2JpvDl49nkeNOovKguxiJwnIRrptNx6MVEHtmiY+ILG8mIF5uFh8Fd/aPiMgnBCgsDyeSK+DfnTweKuHhyf2WrlNYHs+pWEwqFpWyfJfA3mEaXz9NEYvPCFBYHk9oRSSMS2d6+a3hS3nM5vL4eiLFnRg8Prff1H0KywdJra9J4OJg0gcjsT8Esc5q7NkcxB0Wi/8IUFg+ySn3gH+eyEezS1jb2vNJVjmMVwlQWD6ZE7FoBa6e6/fJaKwP4/aDKYilDCz+JEBh+SSvFNbzRFJYPpnQbxkGheWT/FJYFJZPpvI7h0Fh+STLFBaF5ZOpTGEFIZEUFoUVhHnOOyyfZJnCorB8MpV5hxWERFJYFFYQ5jnvsHySZQqLwvLJVOYdVhASSWFRWEGY57zD8kmWKSwKyydTmXdYQUgkhUVhBWGe8w7LJ1mmsCgsn0xl3mEFIZEUFoUVhHnOOyyfZJnCorB8MpV5hxWERFJYFFYQ5jnvsHySZQqLwvLJVOYdVhASSWFRWEGY57zD8kmWKSwKyydTmXdYQUikOKfwCnccxe2H08gcZ4OQ8kCOkXdYPkl7dWWseHpO0MsXj2ZwlDkOOgbfjp/C8klqeXLO80TenZjD7gFPevbJtH5tGBSWTzKbbG3AQGeLT0ZjfRiPZpawts1Tc6wT1LsmhaV3fkru3dm+DrTU15R8vV8v5PH0fs3s83FRWD7J7/ffG4Q4BTroZXv/EOPP5oOOwbfjp7B8kNr66gQunuLJzyKVpmnil/eeIV8wfZBZDuFVAhSWD+bE6Z52tDfW+mAkzgzhaWoZy5u7zjTGVrQiQGFplY7yO5OIR3F5uK/8ij6uIb4lFN8WsviPAIXl8ZxeGEyioSbh8VE43/0nqWWs8C7LebCKW6SwFCfATvj2pjqc7m6z04Rv64rV7neezCKfL/h2jEEcGIXl0ayLj4IfnO5BOBTy6Ajc7/bSxg4m5lbcD8QI0ghQWNJQOxdIvDc4MtSNWEXEuUZ92tK9qQVs7R74dHTBGxaF5bGcC1mJ51aVsQqP9VxNdwsFE/enFiDWZ7F4nwCF5aEcio+BQla8syovaflCofjRcHWLr+yUR06/qyks/XLyxh4lWxvR196IEJ9ZWc7Ywto2ppfWUSjwQbxliIorUliKE3BS+Ka6avS1N6GqMnbSpfx9CQQy2RxSyxsQD+RZvEeAwtI0Z0JQg10tEK/dsDhP4DB9jLnVTaxu7oIv8TjP160WKSy3yFpsVzxU7+toQmsDX7WxiLCsahRXWbiUX0xhKU/B8w5EKyLobm1EZ3MdDMPQpFfB6YYQV2plE2tbvOPSOesUluLsiIWfybZGdDXXIxLmIlDF6QDFpToD745PYSnKj7iLEq/W9LQ1cpmCohy8KyzFpWFSuIGfmqSInUHFc6rKWFRNBxi1ZAIUV8mopFzIOywpmJ8Hqa2KY7CrFTWJuMSoDOUEAYrLCYr226Cw7DM8sQWxQr2/oxliTRWLtwkcpjNIrWxhdYsbBKrIJIXlInVxGnNveyPaGuvA7/1cBK2gaYpLAXQ+w3IHeiQchjh2K9lSz1dp3EGsTavPxbXJ9xQlZYR3WA6CDhkGOlsa0N3awBNsHOTqhaYO0hmII8b4grW72aKwHOIrPvb1tjUgzm/+HCLqzWYoLnfzRmHZ5NtYW4W+jmZU8+VkmyT9VV2I6/nKeW5p42RmKSyLNPlyskVwAat2cJRBapXicirtFFaZJPlycpnAeHmRQFFc4o5rm3dcdqYEhVUiPXEMfE9bE19OLpEXL3szAYrL3sygsE7gV3w5ubUBXS0NfDnZ3lxj7ZcIUFzWpgOF9RZufDnZ2oRirfIIUFzl8aKw3sCLLyeXN4l4tX0C+0fP13HxGde7WVJYL/Hhy8n2//DYgj0CQlzi4fw6H86/ESSFBYAvJ9v7I2Nt5wlQXG9mGmhhvXg5uaGW2xI7/zfHFh0gQHF9F2IghcWXkx34S2ITUglQXM9xB0pYYtGneKDe3SaWKISlTjgGIwEnCIhvFWcD/IwrEMKqTsSLG+g11PCMPyf+aNiGegLp4yyWN3axuL6FXD44J1n7WlhiK2JxGGltVaX6GcYekIALBISslje2sbC+g8xx1oUIejXpS2GJj3tip0+xOp2FBIJCYGVzB3OrW8WjyvxafCWsb1+j6Wyu5wZ6fp2xHNeJBDZ29otrufYO0yde67ULfCMscbR7f0cTxFIFFhIgAUCIa3Z5A+IbRr8UzwtL7KJwpqcdYiM9FhIggdcJ+OmOy9PCaqqtwumedn78418pCZRAYHP3AFOLa55+xuVZYYllCt1tjSWkiZeQAAm8TGB+bQup5U3k8nnPgfGcsMTJNOf6O/kR0HNTjR3WiUA2l4cQ18LaNgoF76zj8pSwxEp1ISse+KDT1GdfvEzgOJvDzNIGljd3PDEMzwhLrFa/MNDF51WemFbspNcIbO8f4mlqBWIFvc7FE8KqjEXx/lASFZGIzizZNxLwNIFCwcTTuRWsbu1qOw7thRWtiOD9oW6Ij4MsJEAC7hMQO59OL627H8hCBK2FFYmEMTKYhDgDkIUESEAegfWdfTycXpQXsMRIWgtr5FQSddXcYaHEXPIyEnCUwM7+ER5ML2q1/EFbYYkFoe2NtY4mgI2RAAmUR0C81jP+bE6bLWy0FJZ4eflUsrU8sryaBEjAFQLiTmvs2ZwrbZfbqHbCqquuxMip7nLHwetJgARcJCBO8Xk4s+RihNKa1kpY0UgYl4Z7EeXyhdKyx6tIQCKB5Y2d4rIHlUUrYYnlC9wdVOV0YGwSeDcBsSo+tbKhDJM2whrqbkNHU50yEAxMAiRwMgHTNHF3Yk7Z5oBaCKuloQZneztOpsUrSIAElBMQr+989WRWyTeHyoUlnltdPtvHY7eUT0N2gARKJ6DqeZZyYYkXmhu4W2jpM4VXkoAmBMYn57G9dyi1N0qFlWxtwEBni9QBMxgJkIAzBMRHwzuPZlAwTWcaLKEVZcKqikdx6UwvDMMooZu8hARIQEcC86ubmFqU96K0MmF9eLYPYtsYFhIgAe8SEN8afvFoRto+WkqE1dveBPHDQgIk4H0CK5u7eJJaljIQ48at8bRhQNr+LYl4FJeH+6QMjkFIgATkELjzeEbCaTzmjnHz1tgMDKNXzrCAD073oCYRlxWOcUiABCQQWNvaw6NZd981NIEnxo3R8Z8bwMcSxlQ8lkscz8VCAiTgPwJu32WZwCfGp6Njf27C+Bu38cWiEXw43IdQKOR2KLZPAiSggMDSxg4m3Hw52jB+bNy4Mz5s5PDI7fFdHEyivoa7h7rNme2TgCoC4hCL2w+nIM48dKPkzYr+4iKom6Nj/wEY190IItpsa6zFmZ52t5pnuyRAApoQmFlaR2pl0/HeiI+D169d/FFRWOIuC1ncdePbwkg4hA/P9vM8QcdTyAZJQD8CmWwOtx9MOdox00QmapinfnBtZP7FMvNPR8f/yAT+wdFIAE53t6Gd28Y4jZXtkYC2BMafzUMczOpUMQ3zD69fHfkn0d533ou5cWvsZ4Zh/NSpQOJIefH6DQsJkEBwCDi5kNQ0zb+8/v2Rn31L77UX+T4dHf+4APyzAdg6siYUMnDpdC/EQlEWEiCB4BAQD99vPZhEPl+wPGgT2IVh/N71qxd+8XIjb3zz+Mbn97qRL/ytYRg/tBqxv7MZ3a2NVquzHgmQgIcJPJ5dwurWnqURmKb5C4RDf3b9yoXXjup551YJNz4f//WQafygUDCvwsCAYaILBqpP6oU4Xv7KuX6EuBPDSaj4exLwJQHxDEs8yzqxmNiHYS6apjEJmJ8jbPzX9SsX/+dt9f4P/eabu3yKFwQAAAAASUVORK5CYII="},d478:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h3",{staticClass:"font-weight-bold mb-3"},[e._v(e._s(e.$i18n.Component_ROI_Title))])]),n("b-col",[n("web-x-roi",{attrs:{drawRegionCount:e.formData.drawRegionCount,snapshotData:e.formData.roiImage,canvasData:e.formData.roiData,buttonClearText:e.$i18n.Button_Clear},on:{"save-roi":e.formROIDraw,"clear-roi":e.formROIClear}})],1)],1),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h3",{staticClass:"font-weight-bold mb-3"},[e._v(e._s(e.$i18n.Component_ROI_With_Customized_Clear_Button_Title))])]),n("b-col",[n("web-x-roi",{attrs:{drawRegionCount:e.formData.drawRegionCount,snapshotData:e.formData.roiImage,canvasData:e.formData.roiData},on:{"save-roi":e.formROIDraw,"clear-roi":e.formROIClear},scopedSlots:e._u([{key:"buttonClear",fn:function(e){var t=e.clearROI;return[n("div",{staticStyle:{"text-align":"center"}},[n("b-button",{attrs:{pill:"",variant:"info"},on:{click:t}},[n("i",{staticClass:"fas fa-times"})])],1)]}}])})],1)],1)],1)},a=[],o=n("1da1"),i=n("5530"),s=n("d4ec"),l=n("bee2"),c=n("262e"),h=n("2caf"),u=(n("96cf"),n("9ab4")),d=n("60a3"),p=(n("ab8b"),n("177c"),n("2b0e")),f=n("1947"),g=n("1bb1");
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */
function m(e){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return w(e)||y(e)||C()}function w(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function y(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function b(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function I(e,t){x(e,t),Object.getOwnPropertyNames(t.prototype).forEach((function(n){x(e.prototype,t.prototype,n)})),Object.getOwnPropertyNames(t).forEach((function(n){x(e,t,n)}))}function x(e,t,n){var r=n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t);r.forEach((function(r){var a=n?Reflect.getOwnMetadata(r,t,n):Reflect.getOwnMetadata(r,t);n?Reflect.defineMetadata(r,a,e,n):Reflect.defineMetadata(r,a,e)}))}var S={__proto__:[]},R=S instanceof Array;function M(e){return function(t,n,r){var a="function"===typeof t?t:t.constructor;a.__decorators__||(a.__decorators__=[]),"number"!==typeof r&&(r=void 0),a.__decorators__.push((function(t){return e(t,n,r)}))}}function E(e){var t=m(e);return null==e||"object"!==t&&"function"!==t}function F(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var r in e.$options.props)e.hasOwnProperty(r)||n.push(r);n.forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})}))};var r=new t;t.prototype._init=n;var a={};return Object.keys(r).forEach((function(e){void 0!==r[e]&&(a[e]=r[e])})),a}var D=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(e){if("constructor"!==e)if(D.indexOf(e)>-1)t[e]=n[e];else{var r=Object.getOwnPropertyDescriptor(n,e);void 0!==r.value?"function"===typeof r.value?(t.methods||(t.methods={}))[e]=r.value:(t.mixins||(t.mixins=[])).push({data:function(){return v({},e,r.value)}}):(r.get||r.set)&&((t.computed||(t.computed={}))[e]={get:r.get,set:r.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return F(this,e)}});var r=e.__decorators__;r&&(r.forEach((function(e){return e(t)})),delete e.__decorators__);var a=Object.getPrototypeOf(e.prototype),o=a instanceof p["default"]?a.constructor:p["default"],i=o.extend(t);return B(i,e,o),b()&&I(i,e),i}var Y={prototype:!0,arguments:!0,callee:!0,caller:!0};function B(e,t,n){Object.getOwnPropertyNames(t).forEach((function(r){if(!Y[r]){var a=Object.getOwnPropertyDescriptor(e,r);if(!a||a.configurable){var o=Object.getOwnPropertyDescriptor(t,r);if(!R){if("cid"===r)return;var i=Object.getOwnPropertyDescriptor(n,r);if(!E(o.value)&&i&&i.value===o.value)return}0,Object.defineProperty(e,r,o)}}}))}function W(e){return"function"===typeof e?O(e):function(t){return O(t,e)}}W.registerHooks=function(e){D.push.apply(D,A(e))};var J,U="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function Q(e,t,n){if(U&&!Array.isArray(e)&&"function"!==typeof e&&"undefined"===typeof e.type){var r=Reflect.getMetadata("design:type",t,n);r!==Object&&(e.type=r)}}function L(e){return void 0===e&&(e={}),function(t,n){Q(e,t,n),M((function(t,n){(t.props||(t.props={}))[n]=e}))(t,n)}}function j(e,t){void 0===t&&(t={});var n=t.deep,r=void 0!==n&&n,a=t.immediate,o=void 0!==a&&a;return M((function(t,n){"object"!==typeof t.watch&&(t.watch=Object.create(null));var a=t.watch;"object"!==typeof a[e]||Array.isArray(a[e])?"undefined"===typeof a[e]&&(a[e]=[]):a[e]=[a[e]],a[e].push({handler:n,deep:r,immediate:o})}))}(function(e){e[e["mouseDown"]=1]="mouseDown",e[e["mouseMove"]=2]="mouseMove",e[e["mouseUp"]=3]="mouseUp"})(J||(J={}));let k=class extends p["default"]{constructor(){super(...arguments),this.widthRatio=1,this.heightRatio=1,this.canvasModelOriginal={x:0,y:0,width:0,height:0},this.canvasModel={...this.canvasModelOriginal},this.roiColor=["#FF0000","#00FF00","#0000FF"],this.canvasModelData=[],this.isDrawing=!1,this.drawStep=J.mouseUp}snapshotDataChanged(e,t){e&&t&&this.initSnapshot(!0)}created(){}mounted(){this.canvasModelData=this.canvasData,this.initSnapshot(!0)}clearModel(){this.canvasModel=JSON.parse(JSON.stringify(this.canvasModelOriginal))}clearROI(){this.canvasModelData=[],this.cxView.clearRect(0,0,600,350),this.initSnapshot(!1),this.$emit("clear-roi",this.canvasModelData)}initCanvas(){this.clearModel();let e=this.$refs.canvas;this.cxView=e.getContext("2d"),this.cxView.lineWidth=3;let t=new Image;t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",this.cxView.clearRect(0,0,600,350),t.onload=()=>{this.cxView.drawImage(t,0,0,600,350),e.addEventListener("mousedown",this.onMouseDown,!1),e.addEventListener("mouseup",this.onMouseUp,!1),e.addEventListener("mousemove",this.onMouseMove,!1)}}onMouseDown(e){this.isDrawing=!0,this.drawStep=J.mouseDown,e.stopPropagation(),this.cxView.strokeStyle=this.drawColor(this.canvasModelData.length),this.startPoint={x:e.offsetX||e.originalEvent.layerX,y:e.offsetY||e.originalEvent.layerY}}onMouseUp(e){this.isDrawing=!1,e.stopPropagation();let t=this.drawStep;this.drawStep=J.mouseUp,this.canvasModelData.length>=this.drawRegionCount||t===J.mouseMove&&(this.canvasModelData.push(JSON.parse(JSON.stringify(this.canvasModel))),this.$emit("save-roi",this.canvasModelData),this.initSnapshot(!1))}onMouseMove(e){if(e.stopPropagation(),!this.isDrawing)return;if(this.canvasModelData.length>=this.drawRegionCount)return;this.drawStep=J.mouseMove;let t={x:e.offsetX||e.originalEvent.layerX,y:e.offsetY||e.originalEvent.layerY};this.cxView.lineWidth=3;let n=this.startPoint.x;t.x<this.startPoint.x&&(n=t.x);let r=this.startPoint.y;t.y<this.startPoint.y&&(r=t.y);let a=Math.abs(t.x-this.startPoint.x),o=Math.abs(t.y-this.startPoint.y);this.cxView.clearRect(0,0,600,350),this.cxView.strokeRect(n,r,a,o),this.canvasModel.x=Math.round(n*this.widthRatio),this.canvasModel.y=Math.round(r*this.heightRatio),this.canvasModel.width=Math.round(a*this.widthRatio),this.canvasModel.height=Math.round(o*this.heightRatio)}initSnapshot(e){let t=this.$refs.snapshot;this.cx=t.getContext("2d"),this.cx.lineWidth=3,this.image=new Image,this.image.src=this.snapshotData.base64,this.image.onload=()=>{this.widthRatio=this.snapshotData.width/600,this.heightRatio=this.snapshotData.height/350,this.cx.drawImage(this.image,0,0,600,350);for(let e of this.canvasModelData){this.cx.strokeStyle=this.drawColor(this.canvasModelData.indexOf(e));let t=Math.round(e.x/this.widthRatio),n=Math.round(e.y/this.heightRatio),r=Math.round(e.width/this.widthRatio),a=Math.round(e.height/this.heightRatio);this.cx.beginPath(),this.cx.rect(t,n,r,a),this.cx.stroke()}e&&this.initCanvas()}}drawColor(e=0){switch(e){case 0:case 1:case 2:break;default:this.roiColor.push(this.getRandomColor());break}return this.roiColor[e]}getRandomColor(){let e="#";for(let t=0;t<8;t++){let t=Math.floor(16*Math.random()).toString(16);e+=t}return e}};Object(u["__decorate"])([L({type:Number,default:3})],k.prototype,"drawRegionCount",void 0),Object(u["__decorate"])([L({type:Object,default:()=>({base64:g["imageEmpty"],width:600,height:350})})],k.prototype,"snapshotData",void 0),Object(u["__decorate"])([L({type:Array,default:()=>[]})],k.prototype,"canvasData",void 0),Object(u["__decorate"])([L({type:String,default:()=>"Clear"})],k.prototype,"buttonClearText",void 0),Object(u["__decorate"])([j("snapshotData",{immediate:!0,deep:!0})],k.prototype,"snapshotDataChanged",null),k=Object(u["__decorate"])([W({components:{BButton:f["a"]}})],k);var P=k;function K(e,t,n,r,a,o,i,s,l,c){"boolean"!==typeof i&&(l=s,s=i,i=!1);const h="function"===typeof n?n.options:n;let u;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,a&&(h.functional=!0)),r&&(h._scopeId=r),o?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},h._ssrRegister=u):t&&(u=i?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),u)if(h.functional){const e=h.render;h.render=function(t,n){return u.call(n),e(t,n)}}else{const e=h.beforeCreate;h.beforeCreate=e?[].concat(e,u):[u]}return n}const N="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function T(e){return(e,t)=>G(e,t)}let V;const X={};function G(e,t){const n=N?t.media||"default":e,r=X[n]||(X[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),void 0===V&&(V=document.head||document.getElementsByTagName("head")[0]),V.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const e=r.ids.size-1,t=document.createTextNode(n),a=r.element.childNodes;a[e]&&r.element.removeChild(a[e]),a.length?r.element.insertBefore(t,a[e]):r.element.appendChild(t)}}}const H=P;var Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",{staticClass:"form-group col-md-12 d-flex justify-content-center align-items-center"},[n("canvas",{ref:"snapshot",staticClass:"position-relative",attrs:{width:"600",height:"350"}}),e._v(" "),n("canvas",{ref:"canvas",staticClass:"position-absolute",attrs:{width:"600",height:"350"}})])]),e._v(" "),e._t("buttonClear",[n("div",{staticClass:"footer center"},[n("b-button",{attrs:{size:"lg"},on:{click:e.clearROI}},[e._v("\n                "+e._s(e.buttonClearText)+"\n            ")])],1)],{clearROI:e.clearROI})],2)},z=[];Z._withStripped=!0;const q=function(e){e&&e("data-v-52c62b0e_0",{source:".center[data-v-52c62b0e] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n/*# sourceMappingURL=web-x-component-roi.vue.map */",map:{version:3,sources:["D:\\1.Develop\\99.npm\\web-x-component-roi\\src\\components\\web-x-component-roi.vue","web-x-component-roi.vue"],names:[],mappings:"AAyRA;EACA,aAAA;EACA,uBAAA;EACA,mBAAA;ACxRA;;AAEA,kDAAkD",file:"web-x-component-roi.vue",sourcesContent:["<template>\r\n    <div>\r\n        <div>\r\n            <div class=\"form-group col-md-12 d-flex justify-content-center align-items-center\">\r\n                <canvas\r\n                    class=\"position-relative\"\r\n                    ref=\"snapshot\"\r\n                    width=\"600\"\r\n                    height=\"350\"\r\n                ></canvas>\r\n\r\n                <canvas\r\n                    class=\"position-absolute\"\r\n                    ref=\"canvas\"\r\n                    width=\"600\"\r\n                    height=\"350\"\r\n                ></canvas>\r\n            </div>\r\n        </div>\r\n\r\n        <slot\r\n            name=\"buttonClear\"\r\n            :clearROI=\"clearROI\"\r\n        >\r\n            <div class=\"footer center\">\r\n                <b-button\r\n                    size=\"lg\"\r\n                    @click=\"clearROI\"\r\n                >\r\n                    {{ buttonClearText }}\r\n                </b-button>\r\n            </div>\r\n        </slot>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Vue, Component, Prop, Emit, Watch } from 'vue-property-decorator';\r\nimport { BButton } from 'bootstrap-vue';\r\nimport { imageEmpty } from 'web-service-base64';\r\nimport { IComponent } from '../models';\r\n\r\n@Component({\r\n    components: {\r\n        BButton,\r\n    },\r\n})\r\nexport default class ROI extends Vue {\r\n    //#region Prop\r\n    @Prop({\r\n        type: Number,\r\n        default: 3,\r\n    })\r\n    drawRegionCount!: number;\r\n\r\n    @Prop({\r\n        type: Object,\r\n        default: () => {\r\n            return {\r\n                base64: imageEmpty,\r\n                width: 600,\r\n                height: 350,\r\n            };\r\n        },\r\n    })\r\n    private snapshotData!: IComponent.ISnapshotData;\r\n\r\n    @Prop({\r\n        type: Array,\r\n        default: () => [],\r\n    })\r\n    private canvasData!: IComponent.ICanvasModel[];\r\n\r\n    @Prop({\r\n        type: String,\r\n        default: () => {\r\n            return 'Clear';\r\n        },\r\n    })\r\n    private buttonClearText!: string;\r\n    //#endregion Prop\r\n\r\n    //#region Variables\r\n    //canvas\r\n    private cxView!: CanvasRenderingContext2D;\r\n    private cx!: CanvasRenderingContext2D;\r\n    private image!: HTMLImageElement;\r\n\r\n    private widthRatio: number = 1; // 寬比例\r\n    private heightRatio: number = 1; // 高比例\r\n\r\n    private canvasModelOriginal: IComponent.ICanvasModel = {\r\n        x: 0,\r\n        y: 0,\r\n        width: 0,\r\n        height: 0,\r\n    };\r\n    private canvasModel: IComponent.ICanvasModel = { ...this.canvasModelOriginal };\r\n\r\n    // drop color\r\n    private roiColor = ['#FF0000', '#00FF00', '#0000FF'];\r\n\r\n    private canvasModelData: IComponent.ICanvasModel[] = [];\r\n\r\n    private isDrawing: boolean = false;\r\n    private drawStep: IComponent.EDrawStep = IComponent.EDrawStep.mouseUp;\r\n    private startPoint: IComponent.ICoordinate;\r\n\r\n    //#endregion Variables\r\n\r\n    @Watch('snapshotData', { immediate: true, deep: true })\r\n    private snapshotDataChanged(newVal: IComponent.ISnapshotData, oldVal: IComponent.ISnapshotData): void {\r\n        if (newVal && oldVal) {\r\n            this.initSnapshot(true);\r\n        }\r\n    }\r\n\r\n    //#region Vue Life\r\n    private created(): void {}\r\n    private mounted(): void {\r\n        this.canvasModelData = this.canvasData;\r\n        this.initSnapshot(true);\r\n    }\r\n    //#endregion Vue Life\r\n\r\n    //#region Clear\r\n    private clearModel(): void {\r\n        this.canvasModel = JSON.parse(JSON.stringify(this.canvasModelOriginal));\r\n    }\r\n\r\n    private clearROI(): void {\r\n        this.canvasModelData = []; //清空畫線\r\n        this.cxView.clearRect(0, 0, 600, 350); //清除\r\n        this.initSnapshot(false); //更新圖片\r\n        this.$emit('clear-roi', this.canvasModelData);\r\n    }\r\n    //#endregion Clear\r\n\r\n    //#region Init\r\n    private initCanvas(): void {\r\n        this.clearModel();\r\n\r\n        //canvas\r\n        let canvasEl: HTMLCanvasElement = this.$refs.canvas as HTMLCanvasElement;\r\n        this.cxView = canvasEl.getContext('2d');\r\n        this.cxView.lineWidth = 3;\r\n        let viewImage = new Image();\r\n        viewImage.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n\r\n        //先清空圖層\r\n        this.cxView.clearRect(0, 0, 600, 350);\r\n        viewImage.onload = () => {\r\n            this.cxView.drawImage(viewImage, 0, 0, 600, 350);\r\n            canvasEl.addEventListener('mousedown', this.onMouseDown, false);\r\n            canvasEl.addEventListener('mouseup', this.onMouseUp, false);\r\n            canvasEl.addEventListener('mousemove', this.onMouseMove, false);\r\n        };\r\n    }\r\n\r\n    private onMouseDown(e: any): void {\r\n        this.isDrawing = true;\r\n        this.drawStep = IComponent.EDrawStep.mouseDown;\r\n        e.stopPropagation();\r\n\r\n        this.cxView.strokeStyle = this.drawColor(this.canvasModelData.length);\r\n        this.startPoint = {\r\n            x: e.offsetX || e.originalEvent.layerX,\r\n            y: e.offsetY || e.originalEvent.layerY,\r\n        };\r\n    }\r\n\r\n    private onMouseUp(e: any): void {\r\n        this.isDrawing = false;\r\n        e.stopPropagation();\r\n\r\n        let prevStep = this.drawStep;\r\n        this.drawStep = IComponent.EDrawStep.mouseUp;\r\n\r\n        if (this.canvasModelData.length >= this.drawRegionCount) return;\r\n        if (prevStep !== IComponent.EDrawStep.mouseMove) return;\r\n\r\n        this.canvasModelData.push(JSON.parse(JSON.stringify(this.canvasModel)));\r\n        this.$emit('save-roi', this.canvasModelData);\r\n        this.initSnapshot(false);\r\n    }\r\n\r\n    private onMouseMove(e: any): void {\r\n        e.stopPropagation();\r\n\r\n        if (!this.isDrawing) return;\r\n        if (this.canvasModelData.length >= this.drawRegionCount) return;\r\n\r\n        this.drawStep = IComponent.EDrawStep.mouseMove;\r\n\r\n        let cursor: IComponent.ICoordinate = {\r\n            x: e.offsetX || e.originalEvent.layerX,\r\n            y: e.offsetY || e.originalEvent.layerY,\r\n        };\r\n\r\n        this.cxView.lineWidth = 3;\r\n        let x: number = this.startPoint.x;\r\n        if (cursor.x < this.startPoint.x) x = cursor.x;\r\n\r\n        let y: number = this.startPoint.y;\r\n        if (cursor.y < this.startPoint.y) y = cursor.y;\r\n\r\n        let w: number = Math.abs(cursor.x - this.startPoint.x);\r\n        let h: number = Math.abs(cursor.y - this.startPoint.y);\r\n\r\n        this.cxView.clearRect(0, 0, 600, 350); //清除路徑\r\n        this.cxView.strokeRect(x, y, w, h);\r\n\r\n        this.canvasModel.x = Math.round(x * this.widthRatio);\r\n        this.canvasModel.y = Math.round(y * this.heightRatio);\r\n        this.canvasModel.width = Math.round(w * this.widthRatio);\r\n        this.canvasModel.height = Math.round(h * this.heightRatio);\r\n    }\r\n\r\n    private initSnapshot(isinitCanvas: boolean): void {\r\n        let canvasEl: HTMLCanvasElement = this.$refs.snapshot as HTMLCanvasElement;\r\n        this.cx = canvasEl.getContext('2d');\r\n\r\n        this.cx.lineWidth = 3;\r\n        this.image = new Image();\r\n        this.image.src = this.snapshotData.base64;\r\n\r\n        this.image.onload = () => {\r\n            this.widthRatio = this.snapshotData.width / 600;\r\n            this.heightRatio = this.snapshotData.height / 350;\r\n            this.cx.drawImage(this.image, 0, 0, 600, 350);\r\n\r\n            for (let item of this.canvasModelData) {\r\n                this.cx.strokeStyle = this.drawColor(this.canvasModelData.indexOf(item));\r\n\r\n                let start_x: number = Math.round(item.x / this.widthRatio);\r\n                let start_y: number = Math.round(item.y / this.heightRatio);\r\n                let start_width: number = Math.round(item.width / this.widthRatio);\r\n                let start_height: number = Math.round(item.height / this.heightRatio);\r\n\r\n                this.cx.beginPath();\r\n                this.cx.rect(start_x, start_y, start_width, start_height);\r\n                this.cx.stroke();\r\n            }\r\n\r\n            if (isinitCanvas) this.initCanvas();\r\n        };\r\n    }\r\n    //#endregion Init\r\n\r\n    //#region Color\r\n    private drawColor(index: number = 0): string {\r\n        switch (index) {\r\n            case 0: // red\r\n            case 1: // green\r\n            case 2: // blue\r\n                break;\r\n            default:\r\n                this.roiColor.push(this.getRandomColor());\r\n                break;\r\n        }\r\n        return this.roiColor[index];\r\n    }\r\n\r\n    // 獲取生成RGB格式的隨機顏色值\r\n    // #ff0000ff 後兩位是透明度，數值越大，顏色越深\r\n    private getRandomColor(): string {\r\n        let colorCode: string = '#';\r\n        for (let i = 0; i < 8; i++) {\r\n            let randomColorCode: string = Math.floor(Math.random() * 16).toString(16);\r\n            colorCode += randomColorCode;\r\n        }\r\n        return colorCode;\r\n    }\r\n    //#endregion Color\r\n}\r\n<\/script>\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.center {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n</style>",".center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n/*# sourceMappingURL=web-x-component-roi.vue.map */"]},media:void 0})},_="data-v-52c62b0e",$=void 0,ee=!1,te=K({render:Z,staticRenderFns:z},q,H,_,ee,$,!1,T,void 0,void 0);var ne=te,re=n("5330"),ae=function(e){Object(c["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.formDataOriginal={roiImage:{base64:re["a"].IMG,width:900,height:475},roiData:[{x:10,y:100,width:100,height:100}],drawRegionCount:10},e.formData=Object(i["a"])({},e.formDataOriginal),e}return Object(l["a"])(n,[{key:"beforeCreate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeMount",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroyed",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"formROIClear",value:function(){this.formData.roiData=[]}},{key:"formROIDraw",value:function(e){this.formData.roiData=e}}]),n}(d["d"]);ae=Object(u["__decorate"])([Object(d["a"])({components:{WebXRoi:ne}})],ae);var oe=ae,ie=oe,se=(n("e88b"),n("2877")),le=Object(se["a"])(ie,r,a,!1,null,"29c98f64",null);t["default"]=le.exports},e88b:function(e,t,n){"use strict";n("2022")}}]);
//# sourceMappingURL=chunk_components_roi.9d759e26.js.map